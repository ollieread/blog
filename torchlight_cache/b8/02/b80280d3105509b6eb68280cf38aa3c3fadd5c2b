1691061159a:5:{s:7:"wrapped";s:9593:"<pre><code data-theme='github-dark' data-lang='php' class='torchlight' style='background-color: #24292e; --theme-selection-background: #39414a;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">getOneBy</span><span style="color: #E1E4E8;">()</span><span style="color: #F97583;">:</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">?</span><span style="color: #79B8FF;">Model</span></div><div class='line'><span style="color: #E1E4E8;">{</span></div><div class='line'><span style="color: #E1E4E8;">    $model </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">$this</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">query</span><span style="color: #E1E4E8;">();</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">\func_num_args</span><span style="color: #E1E4E8;">() </span><span style="color: #F97583;">===</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">2</span><span style="color: #E1E4E8;">) {</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #79B8FF;">list</span><span style="color: #E1E4E8;">($column, $value) </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">\func_get_args</span><span style="color: #E1E4E8;">();</span></div><div class='line'><span style="color: #E1E4E8;">        $method </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">\is_array</span><span style="color: #E1E4E8;">($value) </span><span style="color: #F97583;">?</span><span style="color: #E1E4E8;"> </span><span style="color: #9ECBFF;">&#39;whereIn&#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">:</span><span style="color: #E1E4E8;"> </span><span style="color: #9ECBFF;">&#39;where&#39;</span><span style="color: #E1E4E8;">;</span></div><div class='line'><span style="color: #E1E4E8;">        $model  </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> $model</span><span style="color: #F97583;">-&gt;</span><span style="color: #E1E4E8;">$method($column, $value);</span></div><div class='line'><span style="color: #E1E4E8;">    } </span><span style="color: #F97583;">elseif</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">\func_num_args</span><span style="color: #E1E4E8;">() </span><span style="color: #F97583;">===</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">1</span><span style="color: #E1E4E8;">) {</span></div><div class='line'><span style="color: #E1E4E8;">        $columns </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">\func_get_args</span><span style="color: #E1E4E8;">();</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">\is_array</span><span style="color: #E1E4E8;">($columns)) {</span></div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">foreach</span><span style="color: #E1E4E8;"> ($columns </span><span style="color: #F97583;">as</span><span style="color: #E1E4E8;"> $column </span><span style="color: #F97583;">=&gt;</span><span style="color: #E1E4E8;"> $value) {</span></div><div class='line'><span style="color: #E1E4E8;">                $method </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">\is_array</span><span style="color: #E1E4E8;">($value) </span><span style="color: #F97583;">?</span><span style="color: #E1E4E8;"> </span><span style="color: #9ECBFF;">&#39;whereIn&#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">:</span><span style="color: #E1E4E8;"> </span><span style="color: #9ECBFF;">&#39;where&#39;</span><span style="color: #E1E4E8;">;</span></div><div class='line'><span style="color: #E1E4E8;">                $model  </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> $model</span><span style="color: #F97583;">-&gt;</span><span style="color: #E1E4E8;">$method($column, $value);</span></div><div class='line'><span style="color: #E1E4E8;">            }</span></div><div class='line'><span style="color: #E1E4E8;">        }</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> $model</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">first</span><span style="color: #E1E4E8;">();</span></div><div class='line'><span style="color: #E1E4E8;">}</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">__call</span><span style="color: #E1E4E8;">(</span><span style="color: #F97583;">string</span><span style="color: #E1E4E8;"> $name, </span><span style="color: #F97583;">array</span><span style="color: #E1E4E8;"> $arguments </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [])</span></div><div class='line'><span style="color: #E1E4E8;">{</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">\count</span><span style="color: #E1E4E8;">($arguments) </span><span style="color: #F97583;">&gt;</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">1</span><span style="color: #E1E4E8;">) {</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #6A737D;">// TODO: Should probably throw an exception here</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">null</span><span style="color: #E1E4E8;">;</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">0</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">===</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">strpos</span><span style="color: #E1E4E8;">($name, </span><span style="color: #9ECBFF;">&#39;getBy&#39;</span><span style="color: #E1E4E8;">)) {</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">$this</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">getBy</span><span style="color: #E1E4E8;">(</span><span style="color: #B392F0;">snake_case</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">substr</span><span style="color: #E1E4E8;">($name, </span><span style="color: #79B8FF;">5</span><span style="color: #E1E4E8;">)), $arguments[</span><span style="color: #79B8FF;">0</span><span style="color: #E1E4E8;">]);</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">0</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">===</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">strpos</span><span style="color: #E1E4E8;">($name, </span><span style="color: #9ECBFF;">&#39;getOneBy&#39;</span><span style="color: #E1E4E8;">)) {</span></div><div class='line'><span style="color: #E1E4E8;">        $column </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">snake_case</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">substr</span><span style="color: #E1E4E8;">($name, </span><span style="color: #79B8FF;">8</span><span style="color: #E1E4E8;">));</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">\call_user_func</span><span style="color: #E1E4E8;">([</span><span style="color: #79B8FF;">$this</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">make</span><span style="color: #E1E4E8;">(), </span><span style="color: #9ECBFF;">&#39;where&#39;</span><span style="color: #E1E4E8;">], $column, $arguments[</span><span style="color: #79B8FF;">0</span><span style="color: #E1E4E8;">])</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">first</span><span style="color: #E1E4E8;">();</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'><span style="color: #E1E4E8;">}</span></div></code></pre>";s:11:"highlighted";s:9435:"<!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">getOneBy</span><span style="color: #E1E4E8;">()</span><span style="color: #F97583;">:</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">?</span><span style="color: #79B8FF;">Model</span></div><div class='line'><span style="color: #E1E4E8;">{</span></div><div class='line'><span style="color: #E1E4E8;">    $model </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">$this</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">query</span><span style="color: #E1E4E8;">();</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">\func_num_args</span><span style="color: #E1E4E8;">() </span><span style="color: #F97583;">===</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">2</span><span style="color: #E1E4E8;">) {</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #79B8FF;">list</span><span style="color: #E1E4E8;">($column, $value) </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">\func_get_args</span><span style="color: #E1E4E8;">();</span></div><div class='line'><span style="color: #E1E4E8;">        $method </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">\is_array</span><span style="color: #E1E4E8;">($value) </span><span style="color: #F97583;">?</span><span style="color: #E1E4E8;"> </span><span style="color: #9ECBFF;">&#39;whereIn&#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">:</span><span style="color: #E1E4E8;"> </span><span style="color: #9ECBFF;">&#39;where&#39;</span><span style="color: #E1E4E8;">;</span></div><div class='line'><span style="color: #E1E4E8;">        $model  </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> $model</span><span style="color: #F97583;">-&gt;</span><span style="color: #E1E4E8;">$method($column, $value);</span></div><div class='line'><span style="color: #E1E4E8;">    } </span><span style="color: #F97583;">elseif</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">\func_num_args</span><span style="color: #E1E4E8;">() </span><span style="color: #F97583;">===</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">1</span><span style="color: #E1E4E8;">) {</span></div><div class='line'><span style="color: #E1E4E8;">        $columns </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">\func_get_args</span><span style="color: #E1E4E8;">();</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">\is_array</span><span style="color: #E1E4E8;">($columns)) {</span></div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">foreach</span><span style="color: #E1E4E8;"> ($columns </span><span style="color: #F97583;">as</span><span style="color: #E1E4E8;"> $column </span><span style="color: #F97583;">=&gt;</span><span style="color: #E1E4E8;"> $value) {</span></div><div class='line'><span style="color: #E1E4E8;">                $method </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">\is_array</span><span style="color: #E1E4E8;">($value) </span><span style="color: #F97583;">?</span><span style="color: #E1E4E8;"> </span><span style="color: #9ECBFF;">&#39;whereIn&#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">:</span><span style="color: #E1E4E8;"> </span><span style="color: #9ECBFF;">&#39;where&#39;</span><span style="color: #E1E4E8;">;</span></div><div class='line'><span style="color: #E1E4E8;">                $model  </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> $model</span><span style="color: #F97583;">-&gt;</span><span style="color: #E1E4E8;">$method($column, $value);</span></div><div class='line'><span style="color: #E1E4E8;">            }</span></div><div class='line'><span style="color: #E1E4E8;">        }</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> $model</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">first</span><span style="color: #E1E4E8;">();</span></div><div class='line'><span style="color: #E1E4E8;">}</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">__call</span><span style="color: #E1E4E8;">(</span><span style="color: #F97583;">string</span><span style="color: #E1E4E8;"> $name, </span><span style="color: #F97583;">array</span><span style="color: #E1E4E8;"> $arguments </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [])</span></div><div class='line'><span style="color: #E1E4E8;">{</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">\count</span><span style="color: #E1E4E8;">($arguments) </span><span style="color: #F97583;">&gt;</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">1</span><span style="color: #E1E4E8;">) {</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #6A737D;">// TODO: Should probably throw an exception here</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">null</span><span style="color: #E1E4E8;">;</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">0</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">===</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">strpos</span><span style="color: #E1E4E8;">($name, </span><span style="color: #9ECBFF;">&#39;getBy&#39;</span><span style="color: #E1E4E8;">)) {</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">$this</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">getBy</span><span style="color: #E1E4E8;">(</span><span style="color: #B392F0;">snake_case</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">substr</span><span style="color: #E1E4E8;">($name, </span><span style="color: #79B8FF;">5</span><span style="color: #E1E4E8;">)), $arguments[</span><span style="color: #79B8FF;">0</span><span style="color: #E1E4E8;">]);</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">0</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">===</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">strpos</span><span style="color: #E1E4E8;">($name, </span><span style="color: #9ECBFF;">&#39;getOneBy&#39;</span><span style="color: #E1E4E8;">)) {</span></div><div class='line'><span style="color: #E1E4E8;">        $column </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">snake_case</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">substr</span><span style="color: #E1E4E8;">($name, </span><span style="color: #79B8FF;">8</span><span style="color: #E1E4E8;">));</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">\call_user_func</span><span style="color: #E1E4E8;">([</span><span style="color: #79B8FF;">$this</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">make</span><span style="color: #E1E4E8;">(), </span><span style="color: #9ECBFF;">&#39;where&#39;</span><span style="color: #E1E4E8;">], $column, $arguments[</span><span style="color: #79B8FF;">0</span><span style="color: #E1E4E8;">])</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">first</span><span style="color: #E1E4E8;">();</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'><span style="color: #E1E4E8;">}</span></div>";s:6:"styles";s:65:"background-color: #24292e; --theme-selection-background: #39414a;";s:7:"classes";s:10:"torchlight";s:5:"attrs";a:2:{s:10:"data-theme";s:11:"github-dark";s:9:"data-lang";s:3:"php";}}