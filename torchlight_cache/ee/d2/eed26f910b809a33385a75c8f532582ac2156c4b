1691059798a:5:{s:7:"wrapped";s:3447:"<pre><code data-theme='github-dark' data-lang='php' class='torchlight' style='background-color: #24292e; --theme-selection-background: #39414a;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">store</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">Request</span><span style="color: #E1E4E8;"> $request, </span><span style="color: #79B8FF;">UserValidator</span><span style="color: #E1E4E8;"> $validator, </span><span style="color: #79B8FF;">UserRepository</span><span style="color: #E1E4E8;"> $repository) {</span></div><div class='line'><span style="color: #E1E4E8;">    $input </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> $request</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">only</span><span style="color: #E1E4E8;">([</span><span style="color: #9ECBFF;">&#39;username&#39;</span><span style="color: #E1E4E8;">, </span><span style="color: #9ECBFF;">&#39;password&#39;</span><span style="color: #E1E4E8;">]);</span></div><div class='line'><span style="color: #E1E4E8;">    $validator</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">validForCreate</span><span style="color: #E1E4E8;">($input);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;">($user </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> $repository</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">create</span><span style="color: #E1E4E8;">($input)) {</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #79B8FF;">Auth</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">login</span><span style="color: #E1E4E8;">($user);</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">redirect</span><span style="color: #E1E4E8;">()</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">route</span><span style="color: #E1E4E8;">(</span><span style="color: #9ECBFF;">&#39;user.dashboard&#39;</span><span style="color: #E1E4E8;">);</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">redirect</span><span style="color: #E1E4E8;">()</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">back</span><span style="color: #E1E4E8;">()</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">with</span><span style="color: #E1E4E8;">([</span><span style="color: #9ECBFF;">&#39;error&#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">=&gt;</span><span style="color: #E1E4E8;"> </span><span style="color: #9ECBFF;">&#39;Unable to create user&#39;</span><span style="color: #E1E4E8;">]);</span></div><div class='line'><span style="color: #E1E4E8;">}</span></div></code></pre>";s:11:"highlighted";s:3289:"<!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">store</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">Request</span><span style="color: #E1E4E8;"> $request, </span><span style="color: #79B8FF;">UserValidator</span><span style="color: #E1E4E8;"> $validator, </span><span style="color: #79B8FF;">UserRepository</span><span style="color: #E1E4E8;"> $repository) {</span></div><div class='line'><span style="color: #E1E4E8;">    $input </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> $request</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">only</span><span style="color: #E1E4E8;">([</span><span style="color: #9ECBFF;">&#39;username&#39;</span><span style="color: #E1E4E8;">, </span><span style="color: #9ECBFF;">&#39;password&#39;</span><span style="color: #E1E4E8;">]);</span></div><div class='line'><span style="color: #E1E4E8;">    $validator</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">validForCreate</span><span style="color: #E1E4E8;">($input);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;">($user </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> $repository</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">create</span><span style="color: #E1E4E8;">($input)) {</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #79B8FF;">Auth</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">login</span><span style="color: #E1E4E8;">($user);</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">redirect</span><span style="color: #E1E4E8;">()</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">route</span><span style="color: #E1E4E8;">(</span><span style="color: #9ECBFF;">&#39;user.dashboard&#39;</span><span style="color: #E1E4E8;">);</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">redirect</span><span style="color: #E1E4E8;">()</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">back</span><span style="color: #E1E4E8;">()</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">with</span><span style="color: #E1E4E8;">([</span><span style="color: #9ECBFF;">&#39;error&#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">=&gt;</span><span style="color: #E1E4E8;"> </span><span style="color: #9ECBFF;">&#39;Unable to create user&#39;</span><span style="color: #E1E4E8;">]);</span></div><div class='line'><span style="color: #E1E4E8;">}</span></div>";s:6:"styles";s:65:"background-color: #24292e; --theme-selection-background: #39414a;";s:7:"classes";s:10:"torchlight";s:5:"attrs";a:2:{s:10:"data-theme";s:11:"github-dark";s:9:"data-lang";s:3:"php";}}