1691073723a:5:{s:7:"wrapped";s:17626:"<pre><code data-theme='github-dark' data-lang='php' class='torchlight' style='background-color: #24292e; --theme-selection-background: #39414a;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #F97583;">abstract</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">class</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">BaseValidator</span></div><div class='line'><span style="color: #E1E4E8;">{</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">static</span><span style="color: #E1E4E8;"> $rules    </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [</span><span style="color: #9ECBFF;">&#39;create&#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">=&gt;</span><span style="color: #E1E4E8;"> [], </span><span style="color: #9ECBFF;">&#39;update&#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">=&gt;</span><span style="color: #E1E4E8;"> []];</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">static</span><span style="color: #E1E4E8;"> $messages </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [</span><span style="color: #9ECBFF;">&#39;create&#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">=&gt;</span><span style="color: #E1E4E8;"> [], </span><span style="color: #9ECBFF;">&#39;update&#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">=&gt;</span><span style="color: #E1E4E8;"> []];</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #6A737D;">/**</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@var</span><span style="color: #6A737D;"> </span><span style="color: #79B8FF;">\Illuminate\Validation\Factory</span></div><div class='line'><span style="color: #6A737D;">     */</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">protected</span><span style="color: #E1E4E8;"> $validator;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #6A737D;">/**</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #79B8FF;">Factory</span><span style="color: #6A737D;"> $validator</span></div><div class='line'><span style="color: #6A737D;">     */</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">__construct</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">Factory</span><span style="color: #E1E4E8;"> $validator)</span></div><div class='line'><span style="color: #E1E4E8;">    {</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #79B8FF;">$this</span><span style="color: #F97583;">-&gt;</span><span style="color: #E1E4E8;">validator </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> $validator;</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">__call</span><span style="color: #E1E4E8;">($method, $arguments)</span></div><div class='line'><span style="color: #E1E4E8;">    {</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #B392F0;">starts_with</span><span style="color: #E1E4E8;">($method, </span><span style="color: #9ECBFF;">&#39;validFor&#39;</span><span style="color: #E1E4E8;">)) {</span></div><div class='line'><span style="color: #E1E4E8;">            $name </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">snake_case</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">substr</span><span style="color: #E1E4E8;">($method, </span><span style="color: #79B8FF;">8</span><span style="color: #E1E4E8;">));</span></div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">isset</span><span style="color: #E1E4E8;">(</span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$messages[$name])) {</span></div><div class='line'><span style="color: #E1E4E8;">                $messages </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$messages[$name];</span></div><div class='line'><span style="color: #E1E4E8;">            } </span><span style="color: #F97583;">else</span><span style="color: #E1E4E8;"> {</span></div><div class='line'><span style="color: #E1E4E8;">                $messages </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [];</span></div><div class='line'><span style="color: #E1E4E8;">            }</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">isset</span><span style="color: #E1E4E8;">(</span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$rules[$name])) {</span></div><div class='line'><span style="color: #E1E4E8;">                $rules </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$rules[$name];</span></div><div class='line'><span style="color: #E1E4E8;">                </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">isset</span><span style="color: #E1E4E8;">($arguments[</span><span style="color: #79B8FF;">1</span><span style="color: #E1E4E8;">]) </span><span style="color: #F97583;">&amp;&amp;</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">is_array</span><span style="color: #E1E4E8;">($arguments[</span><span style="color: #79B8FF;">1</span><span style="color: #E1E4E8;">])) {</span></div><div class='line'><span style="color: #E1E4E8;">                    $rules </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">array_merge</span><span style="color: #E1E4E8;">($rules, $arguments[</span><span style="color: #79B8FF;">1</span><span style="color: #E1E4E8;">]);</span></div><div class='line'><span style="color: #E1E4E8;">                }</span></div><div class='line'><span style="color: #E1E4E8;">                </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">$this</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">fire</span><span style="color: #E1E4E8;">($arguments[</span><span style="color: #79B8FF;">0</span><span style="color: #E1E4E8;">], $rules, $messages);</span></div><div class='line'><span style="color: #E1E4E8;">            }</span></div><div class='line'><span style="color: #E1E4E8;">        }</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #6A737D;">/**</span></div><div class='line'><span style="color: #6A737D;">     * Generic method</span></div><div class='line'><span style="color: #6A737D;">     *</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #79B8FF;">String</span><span style="color: #6A737D;"> $action   The action that define the validation. It corresponds to the array key on the Validator file.</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">array</span><span style="color: #6A737D;">  $data     Array of data to validate against.</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">array</span><span style="color: #6A737D;">  $rules    Additionnal rules that could come from the controller.</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">array</span><span style="color: #6A737D;">  $messages Additionnal messages that could come from the controller.</span></div><div class='line'><span style="color: #6A737D;">     *</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@return</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">bool</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@throws</span><span style="color: #6A737D;"> </span><span style="color: #79B8FF;">\Exception</span></div><div class='line'><span style="color: #6A737D;">     */</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">validFor</span><span style="color: #E1E4E8;">($action, </span><span style="color: #F97583;">array</span><span style="color: #E1E4E8;"> $data, </span><span style="color: #F97583;">array</span><span style="color: #E1E4E8;"> $rules </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [], </span><span style="color: #F97583;">array</span><span style="color: #E1E4E8;"> $messages </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [])</span></div><div class='line'><span style="color: #E1E4E8;">    {</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #F97583;">!</span><span style="color: #79B8FF;">isset</span><span style="color: #E1E4E8;">($action) </span><span style="color: #F97583;">||</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">is_array</span><span style="color: #E1E4E8;">($action) </span><span style="color: #F97583;">||</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">!</span><span style="color: #79B8FF;">is_string</span><span style="color: #E1E4E8;">($action)) {</span></div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">throw</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">new</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">\Exception</span><span style="color: #E1E4E8;">(</span><span style="color: #9ECBFF;">&#39;Invalid validation rulset for &#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">.</span><span style="color: #E1E4E8;"> $action);</span></div><div class='line'><span style="color: #E1E4E8;">        }</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">        $rules    </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">array_key_exists</span><span style="color: #E1E4E8;">($action, </span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$rules)    </span><span style="color: #F97583;">?</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">array_merge</span><span style="color: #E1E4E8;">(</span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$rules[$action], $rules) </span><span style="color: #F97583;">:</span><span style="color: #E1E4E8;"> $rules;</span></div><div class='line'><span style="color: #E1E4E8;">        $messages </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">array_key_exists</span><span style="color: #E1E4E8;">($action, </span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$messages) </span><span style="color: #F97583;">?</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">array_merge</span><span style="color: #E1E4E8;">(</span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$messages[$action], $messages) </span><span style="color: #F97583;">:</span><span style="color: #E1E4E8;"> $messages;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">$this</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">fire</span><span style="color: #E1E4E8;">($data, $rules, $messages);</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #6A737D;">/**</span></div><div class='line'><span style="color: #6A737D;">     * Trigger validation</span></div><div class='line'><span style="color: #6A737D;">     *</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">array</span><span style="color: #6A737D;"> $data</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">array</span><span style="color: #6A737D;"> $rules</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">array</span><span style="color: #6A737D;"> $messages</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@return</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">bool</span></div><div class='line'><span style="color: #6A737D;">     */</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">private</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">fire</span><span style="color: #E1E4E8;">(</span><span style="color: #F97583;">array</span><span style="color: #E1E4E8;"> $data, </span><span style="color: #F97583;">array</span><span style="color: #E1E4E8;"> $rules </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [], </span><span style="color: #F97583;">array</span><span style="color: #E1E4E8;"> $messages </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [])</span></div><div class='line'><span style="color: #E1E4E8;">    {</span></div><div class='line'><span style="color: #E1E4E8;">        $validation </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">$this</span><span style="color: #F97583;">-&gt;</span><span style="color: #E1E4E8;">validator</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">make</span><span style="color: #E1E4E8;">($data, $rules, $messages);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> ($validation</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">fails</span><span style="color: #E1E4E8;">()) {</span></div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">throw</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">new</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">ValidationException</span><span style="color: #E1E4E8;">($validation);</span></div><div class='line'><span style="color: #E1E4E8;">        }</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">true</span><span style="color: #E1E4E8;">;</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'><span style="color: #E1E4E8;">}</span></div></code></pre>";s:11:"highlighted";s:17468:"<!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #F97583;">abstract</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">class</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">BaseValidator</span></div><div class='line'><span style="color: #E1E4E8;">{</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">static</span><span style="color: #E1E4E8;"> $rules    </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [</span><span style="color: #9ECBFF;">&#39;create&#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">=&gt;</span><span style="color: #E1E4E8;"> [], </span><span style="color: #9ECBFF;">&#39;update&#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">=&gt;</span><span style="color: #E1E4E8;"> []];</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">static</span><span style="color: #E1E4E8;"> $messages </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [</span><span style="color: #9ECBFF;">&#39;create&#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">=&gt;</span><span style="color: #E1E4E8;"> [], </span><span style="color: #9ECBFF;">&#39;update&#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">=&gt;</span><span style="color: #E1E4E8;"> []];</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #6A737D;">/**</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@var</span><span style="color: #6A737D;"> </span><span style="color: #79B8FF;">\Illuminate\Validation\Factory</span></div><div class='line'><span style="color: #6A737D;">     */</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">protected</span><span style="color: #E1E4E8;"> $validator;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #6A737D;">/**</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #79B8FF;">Factory</span><span style="color: #6A737D;"> $validator</span></div><div class='line'><span style="color: #6A737D;">     */</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">__construct</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">Factory</span><span style="color: #E1E4E8;"> $validator)</span></div><div class='line'><span style="color: #E1E4E8;">    {</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #79B8FF;">$this</span><span style="color: #F97583;">-&gt;</span><span style="color: #E1E4E8;">validator </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> $validator;</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">__call</span><span style="color: #E1E4E8;">($method, $arguments)</span></div><div class='line'><span style="color: #E1E4E8;">    {</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #B392F0;">starts_with</span><span style="color: #E1E4E8;">($method, </span><span style="color: #9ECBFF;">&#39;validFor&#39;</span><span style="color: #E1E4E8;">)) {</span></div><div class='line'><span style="color: #E1E4E8;">            $name </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">snake_case</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">substr</span><span style="color: #E1E4E8;">($method, </span><span style="color: #79B8FF;">8</span><span style="color: #E1E4E8;">));</span></div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">isset</span><span style="color: #E1E4E8;">(</span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$messages[$name])) {</span></div><div class='line'><span style="color: #E1E4E8;">                $messages </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$messages[$name];</span></div><div class='line'><span style="color: #E1E4E8;">            } </span><span style="color: #F97583;">else</span><span style="color: #E1E4E8;"> {</span></div><div class='line'><span style="color: #E1E4E8;">                $messages </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [];</span></div><div class='line'><span style="color: #E1E4E8;">            }</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">isset</span><span style="color: #E1E4E8;">(</span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$rules[$name])) {</span></div><div class='line'><span style="color: #E1E4E8;">                $rules </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$rules[$name];</span></div><div class='line'><span style="color: #E1E4E8;">                </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">isset</span><span style="color: #E1E4E8;">($arguments[</span><span style="color: #79B8FF;">1</span><span style="color: #E1E4E8;">]) </span><span style="color: #F97583;">&amp;&amp;</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">is_array</span><span style="color: #E1E4E8;">($arguments[</span><span style="color: #79B8FF;">1</span><span style="color: #E1E4E8;">])) {</span></div><div class='line'><span style="color: #E1E4E8;">                    $rules </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">array_merge</span><span style="color: #E1E4E8;">($rules, $arguments[</span><span style="color: #79B8FF;">1</span><span style="color: #E1E4E8;">]);</span></div><div class='line'><span style="color: #E1E4E8;">                }</span></div><div class='line'><span style="color: #E1E4E8;">                </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">$this</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">fire</span><span style="color: #E1E4E8;">($arguments[</span><span style="color: #79B8FF;">0</span><span style="color: #E1E4E8;">], $rules, $messages);</span></div><div class='line'><span style="color: #E1E4E8;">            }</span></div><div class='line'><span style="color: #E1E4E8;">        }</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #6A737D;">/**</span></div><div class='line'><span style="color: #6A737D;">     * Generic method</span></div><div class='line'><span style="color: #6A737D;">     *</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #79B8FF;">String</span><span style="color: #6A737D;"> $action   The action that define the validation. It corresponds to the array key on the Validator file.</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">array</span><span style="color: #6A737D;">  $data     Array of data to validate against.</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">array</span><span style="color: #6A737D;">  $rules    Additionnal rules that could come from the controller.</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">array</span><span style="color: #6A737D;">  $messages Additionnal messages that could come from the controller.</span></div><div class='line'><span style="color: #6A737D;">     *</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@return</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">bool</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@throws</span><span style="color: #6A737D;"> </span><span style="color: #79B8FF;">\Exception</span></div><div class='line'><span style="color: #6A737D;">     */</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">validFor</span><span style="color: #E1E4E8;">($action, </span><span style="color: #F97583;">array</span><span style="color: #E1E4E8;"> $data, </span><span style="color: #F97583;">array</span><span style="color: #E1E4E8;"> $rules </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [], </span><span style="color: #F97583;">array</span><span style="color: #E1E4E8;"> $messages </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [])</span></div><div class='line'><span style="color: #E1E4E8;">    {</span></div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> (</span><span style="color: #F97583;">!</span><span style="color: #79B8FF;">isset</span><span style="color: #E1E4E8;">($action) </span><span style="color: #F97583;">||</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">is_array</span><span style="color: #E1E4E8;">($action) </span><span style="color: #F97583;">||</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">!</span><span style="color: #79B8FF;">is_string</span><span style="color: #E1E4E8;">($action)) {</span></div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">throw</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">new</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">\Exception</span><span style="color: #E1E4E8;">(</span><span style="color: #9ECBFF;">&#39;Invalid validation rulset for &#39;</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">.</span><span style="color: #E1E4E8;"> $action);</span></div><div class='line'><span style="color: #E1E4E8;">        }</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">        $rules    </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">array_key_exists</span><span style="color: #E1E4E8;">($action, </span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$rules)    </span><span style="color: #F97583;">?</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">array_merge</span><span style="color: #E1E4E8;">(</span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$rules[$action], $rules) </span><span style="color: #F97583;">:</span><span style="color: #E1E4E8;"> $rules;</span></div><div class='line'><span style="color: #E1E4E8;">        $messages </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">array_key_exists</span><span style="color: #E1E4E8;">($action, </span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$messages) </span><span style="color: #F97583;">?</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">array_merge</span><span style="color: #E1E4E8;">(</span><span style="color: #F97583;">static::</span><span style="color: #E1E4E8;">$messages[$action], $messages) </span><span style="color: #F97583;">:</span><span style="color: #E1E4E8;"> $messages;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">$this</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">fire</span><span style="color: #E1E4E8;">($data, $rules, $messages);</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #6A737D;">/**</span></div><div class='line'><span style="color: #6A737D;">     * Trigger validation</span></div><div class='line'><span style="color: #6A737D;">     *</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">array</span><span style="color: #6A737D;"> $data</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">array</span><span style="color: #6A737D;"> $rules</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@param</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">array</span><span style="color: #6A737D;"> $messages</span></div><div class='line'><span style="color: #6A737D;">     * </span><span style="color: #F97583;">@return</span><span style="color: #6A737D;"> </span><span style="color: #F97583;">bool</span></div><div class='line'><span style="color: #6A737D;">     */</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">private</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">fire</span><span style="color: #E1E4E8;">(</span><span style="color: #F97583;">array</span><span style="color: #E1E4E8;"> $data, </span><span style="color: #F97583;">array</span><span style="color: #E1E4E8;"> $rules </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [], </span><span style="color: #F97583;">array</span><span style="color: #E1E4E8;"> $messages </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> [])</span></div><div class='line'><span style="color: #E1E4E8;">    {</span></div><div class='line'><span style="color: #E1E4E8;">        $validation </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">$this</span><span style="color: #F97583;">-&gt;</span><span style="color: #E1E4E8;">validator</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">make</span><span style="color: #E1E4E8;">($data, $rules, $messages);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">if</span><span style="color: #E1E4E8;"> ($validation</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">fails</span><span style="color: #E1E4E8;">()) {</span></div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">throw</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">new</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">ValidationException</span><span style="color: #E1E4E8;">($validation);</span></div><div class='line'><span style="color: #E1E4E8;">        }</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #E1E4E8;">        </span><span style="color: #F97583;">return</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">true</span><span style="color: #E1E4E8;">;</span></div><div class='line'><span style="color: #E1E4E8;">    }</span></div><div class='line'><span style="color: #E1E4E8;">}</span></div>";s:6:"styles";s:65:"background-color: #24292e; --theme-selection-background: #39414a;";s:7:"classes";s:10:"torchlight";s:5:"attrs";a:2:{s:10:"data-theme";s:11:"github-dark";s:9:"data-lang";s:3:"php";}}