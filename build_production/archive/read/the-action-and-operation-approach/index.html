<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>The Action and Operation approach | ollieread.com</title>

    <link rel="home" href="https://ollieread.com">
    <link rel="icon" href="/favicon.ico">
    <link href="/blog/feed.atom" type="application/atom+xml" rel="alternate" title="ollieread.com Atom Feed">

    <link rel="stylesheet" href="/assets/build/css/app.css?id=9d2bb2ccf5ec74454d4e6db68f8d60df">

    
        <!--  Metadata -->
    <meta name="description" content="" />

    <!-- OpenGraph Metadata -->
    <meta name="og:type" property="og:type" content="article" />
    <meta name="og:title" property="og:title" content="The Action and Operation approach"/>
    <meta name="og:url" property="og:url" content="https://ollieread.com/archive/read/the-action-and-operation-approach" />
    <meta name="og:locale" property="og:locale" content="en_GB" />
    <meta name="og:site_name" property="og:site_name" content="ollieread.com"/>
    <meta name="og:image" property="og:image" content="/assets/images/page-thumbnail.png" />

    <!-- Article Metadata -->
    <meta name="article:published_time" property="article:published_time" content="2019-10-07T13:00:00+00:00"/>
    <meta name="article:section" property="article:section" content="guides"/>

    <!-- Twitter Metadata -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:creator" content="@ollieread" />
</head>

<body class="antialiased">

<header class="header">

    <nav class="header__links">
    <a href="https://twitter.com/ollieread" target="__blank" class="header__link header__link--twitter">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="100%" height="100%">
            <path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/>
        </svg>
    </a>
    <a href="https://phpc.social/@ollieread" target="__blank" class="header__link header__link--mastodon" rel="me">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="100%" height="100%">
            <!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
            <path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/>
        </svg>
    </a>
    <a href="https://github.com/ollieread" target="__blank" class="header__link header__link--github">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" width="100%" height="100%">
            <!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
            <path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/>
        </svg>
    </a>
    <a href="https://youtube.com/@olliecodes" target="__blank" class="header__link header__link--youtube">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="100%" height="100%">
            <!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
            <path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/>
        </svg>
    </a>
    <a href="https://discord.gg/rtQF6jCTk3" target="__blank" class="header__link header__link--discord">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" width="100%" height="100%">
            <!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
            <path d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"/>
        </svg>
    </a>
</nav>    <img src="/assets/images/ollieread.jpg"
         alt="Picture of ollieread"
         class="header__image">

    <div class="header__title">Ollie Read</div>

    <div class="header__nav navbar">
    <a href="/" class="navbar__item ">
        <svg class="navbar__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M272.5 5.7C281.4-1.9 294.6-1.9 303.5 5.7L567.5 229.7C577.6 238.3 578.9 253.4 570.3 263.5C561.7 273.6 546.6 274.9 536.5 266.3L512 245.5V432C512 476.2 476.2 512 432 512H144C99.82 512 64 476.2 64 432V245.5L39.53 266.3C29.42 274.9 14.28 273.6 5.7 263.5C-2.876 253.4-1.634 238.3 8.473 229.7L272.5 5.7zM112 204.8V432C112 449.7 126.3 464 144 464H432C449.7 464 464 449.7 464 432V204.8L288 55.47L112 204.8z"/></svg>
        <svg class="navbar__icon navbar__icon--full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c.2 35.5-28.5 64.3-64 64.3H128.1c-35.3 0-64-28.7-64-64V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/></svg>
        Home
    </a>
    <a href="/articles" class="navbar__item ">
        <svg class="navbar__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M456 32h-304C121.1 32 96 57.13 96 88v320c0 13.22-10.77 24-24 24S48 421.2 48 408V112c0-13.25-10.75-24-24-24S0 98.75 0 112v296C0 447.7 32.3 480 72 480h352c48.53 0 88-39.47 88-88v-304C512 57.13 486.9 32 456 32zM464 392c0 22.06-17.94 40-40 40H139.9C142.5 424.5 144 416.4 144 408v-320c0-4.406 3.594-8 8-8h304c4.406 0 8 3.594 8 8V392zM264 272h-64C186.8 272 176 282.8 176 296S186.8 320 200 320h64C277.3 320 288 309.3 288 296S277.3 272 264 272zM408 272h-64C330.8 272 320 282.8 320 296S330.8 320 344 320h64c13.25 0 24-10.75 24-24S421.3 272 408 272zM264 352h-64c-13.25 0-24 10.75-24 24s10.75 24 24 24h64c13.25 0 24-10.75 24-24S277.3 352 264 352zM408 352h-64C330.8 352 320 362.8 320 376s10.75 24 24 24h64c13.25 0 24-10.75 24-24S421.3 352 408 352zM400 112h-192c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h192c17.67 0 32-14.33 32-32v-64C432 126.3 417.7 112 400 112z"/></svg>
        <svg class="navbar__icon navbar__icon--full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M96 96c0-35.3 28.7-64 64-64H448c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H80c-44.2 0-80-35.8-80-80V128c0-17.7 14.3-32 32-32s32 14.3 32 32V400c0 8.8 7.2 16 16 16s16-7.2 16-16V96zm64 24v80c0 13.3 10.7 24 24 24H424c13.3 0 24-10.7 24-24V120c0-13.3-10.7-24-24-24H184c-13.3 0-24 10.7-24 24zm0 184c0 8.8 7.2 16 16 16h96c8.8 0 16-7.2 16-16s-7.2-16-16-16H176c-8.8 0-16 7.2-16 16zm160 0c0 8.8 7.2 16 16 16h96c8.8 0 16-7.2 16-16s-7.2-16-16-16H336c-8.8 0-16 7.2-16 16zM160 400c0 8.8 7.2 16 16 16h96c8.8 0 16-7.2 16-16s-7.2-16-16-16H176c-8.8 0-16 7.2-16 16zm160 0c0 8.8 7.2 16 16 16h96c8.8 0 16-7.2 16-16s-7.2-16-16-16H336c-8.8 0-16 7.2-16 16z"/></svg>
        Articles
    </a>
    <a href="/archive" class="navbar__item ">
        <svg class="navbar__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M464 32h-416C21.49 32 0 53.49 0 80v64C0 161.6 14.4 176 31.1 176L32 416c0 35.35 28.65 64 64 64h320c35.35 0 64-28.65 64-64V176c17.6 0 32-14.4 32-31.1V80C512 53.49 490.5 32 464 32zM416 432H96c-8.837 0-16-7.163-16-16V176h352V416C432 424.8 424.8 432 416 432zM464 128h-416V80h416V128zM183.1 272h144C341.3 272 352 261.3 352 248C352 234.7 341.3 224 328 224H183.1C170.7 224 160 234.7 160 247.1C160 261.3 170.7 272 183.1 272z"/></svg>
        <svg class="navbar__icon navbar__icon--full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M32 32H480c17.7 0 32 14.3 32 32V96c0 17.7-14.3 32-32 32H32C14.3 128 0 113.7 0 96V64C0 46.3 14.3 32 32 32zm0 128H480V416c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V160zm128 80c0 8.8 7.2 16 16 16H336c8.8 0 16-7.2 16-16s-7.2-16-16-16H176c-8.8 0-16 7.2-16 16z"/></svg>
        Archive
    </a>
    
</div>
</header>

<main class="section content">
    
    
    <div class="panel">
    
    <header class="panel__header">

        <div class="panel__badges">
            <a href="/"
               class="badge badge--green">Category</a>
                            <span class="badge badge--red">Archived</span>
                    </div>

        <h1 class="panel__header-title">The Action and Operation approach</h1>

        <time class="panel__header-time">7th October, 2019</time>

    </header>
    <main class="panel__body">
        <p>The action and operation approach is one that I recently came up with while trying to solve my never-ending quest for the tidiest code. I imagine that I am not the first person to come up with this solution, and there very well may be some obscure design pattern out there, but I couldn't find it.</p>
<p>This article is to serve as a write up about the pattern, and how I came to discover it.</p>
<div class="notice notice--info">
Rather than constantly writing <code>Action and Operation</code>, I'll be referring to it as <code>A&amp;O</code>, or simply <code>The pattern</code> for the duration of this article.
</div>
<ul class="toc">
<li>
<a href="#introduction">Introduction</a>
<ul>
<li>
<a href="#actions">Actions</a>
<ul>
<li>
<a href="#example-action">Example Action</a>
</li>
</ul>
</li>
<li>
<a href="#operations">Operations</a>
<ul>
<li>
<a href="#example-operation">Example Operation</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#comparison">Comparison</a>
<ul>
<li>
<a href="#actions-vs-controllers">Actions vs Controllers</a>
</li>
<li>
<a href="#actions-vs-single-action-controllers">Actions vs Single Action Controllers</a>
</li>
<li>
<a href="#action-conclusion">Action Conclusion</a>
</li>
<li>
<a href="#operations-vs-inline">Operations vs Inline</a>
</li>
<li>
<a href="#operations-vs-repositories">Operations vs Repositories</a>
</li>
<li>
<a href="#operations-vs-services">Operations vs Services</a>
</li>
<li>
<a href="#operations-vs-model-methods">Operations vs Model Methods</a>
</li>
<li>
<a href="#operations-conclusion">Operations Conclusion</a>
</li>
</ul>
</li>
<li>
<a href="#command-query-separation">Command Query Separation</a>
<ul>
<li>
<a href="#commands">Commands</a>
</li>
<li>
<a href="#queries">Queries</a>
</li>
<li>
<a href="#so-why-not-cqs">So why not CQS?</a>
</li>
</ul>
</li>
<li>
<a href="#conclusion">Conclusion</a>
</li>
</ul>
<h1><a id="introduction" href="#introduction" class="hidden" aria-hidden="true" title="Permalink"></a>Introduction</h1>
<p>The pattern is intended as an alternative to the standard controller and repository approach, by creating code more specific to its purpose. You end up creating more files, but overall it's easier to navigate.</p>
<p>But before we can really get into the nitty gritty we need to define what exactly actions and operations are.</p>
<h2><a id="actions" href="#actions" class="hidden" aria-hidden="true" title="Permalink"></a>Actions</h2>
<p>Actions are essentially more streamlined controllers with a single purpose. They're pretty simple and nothing special, in fact, you're probably already familiar with the idea of 'single action controllers', which isn’t a million miles away from these kind of actions.</p>
<p>With the A&amp;O approach an action is the specific end-goal of the routes, so you'd have a single action with a <code>create</code> and <code>store</code> method. The reason for this is that the <code>create</code> method only exists to provide a form to submit data to the <code>store</code> method. They're two sides to the same coin.</p>
<h3><a id="example-action" href="#example-action" class="hidden" aria-hidden="true" title="Permalink"></a>Example Action</h3>
<p>If you want to see an example, check out the <a rel="noopener noreferrer" target="_blank" class="link link--external" href="https://github.com/ollieread/ollieread.com/blob/master/app/Articles/Actions/Article.php">action</a> that handles this page. Feel free to browse around and look at the others.</p>
<h2><a id="operations" href="#operations" class="hidden" aria-hidden="true" title="Permalink"></a>Operations</h2>
<p>Operations are a little more complex than actions, but not hugely. The idea behind them is that they represent a particular operation within your system, including all of the ways that operation can be performed.</p>
<p>Operations in essence are fluent builders, allowing you to daisy-chain a series of setters before calling a <code>perform</code> method, that will return the result.</p>
<h3><a id="example-operation" href="#example-operation" class="hidden" aria-hidden="true" title="Permalink"></a>Example Operation</h3>
<p>Example operations would be <code>CreateArticle</code>, <code>GetArticle</code> and <code>GetArticles</code>, all of which are reused. These particular examples are operations this site uses, with <code>GetArticles</code> being used on the <a href="/articles">articles</a>, <a href="/articles/version/laravel-6.x">version</a>, <a href="/articles/category/tutorials">category</a> and <a href="/articles/topic/laravel">topic</a> pages.</p>
<p>If you want to see the example, check out the <a rel="noopener noreferrer" target="_blank" class="link link--external" href="https://github.com/ollieread/ollieread.com/blob/master/app/Articles/Operations/GetArticle.php">operation</a> on GitHub.</p>
<h1><a id="comparison" href="#comparison" class="hidden" aria-hidden="true" title="Permalink"></a>Comparison</h1>
<p>Now that I've defined actions and operations, let’s look at how they stack up against other approaches.</p>
<div class="notice notice--info">
All of the examples here are based on a standard non-api project build, and the number of actions required for each example would be less if creating an API.
</div>
<h2><a id="actions-vs-controllers" href="#actions-vs-controllers" class="hidden" aria-hidden="true" title="Permalink"></a>Actions vs Controllers</h2>
<p>To compare the two, let’s take a look at the following example Laravel controller.</p>
<pre><code data-theme="github-dark" data-lang="php" class='torchlight' style='background-color: #24292e; --theme-selection-background: #39414a;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #F97583;">namespace</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">App\Http\Controllers</span><span style="color: #E1E4E8;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #F97583;">class</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">ArticleController</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">extends</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">Controller</span><span style="color: #E1E4E8;"> {</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">index</span><span style="color: #E1E4E8;">() { </span><span style="color: #6A737D;">// ... }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">view</span><span style="color: #E1E4E8;">() { </span><span style="color: #6A737D;">// ... }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">create</span><span style="color: #E1E4E8;">() { </span><span style="color: #6A737D;">// ... }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">store</span><span style="color: #E1E4E8;">() { </span><span style="color: #6A737D;">// ... }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">edit</span><span style="color: #E1E4E8;">() { </span><span style="color: #6A737D;">// ... }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">update</span><span style="color: #E1E4E8;">() { </span><span style="color: #6A737D;">// ... }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">delete</span><span style="color: #E1E4E8;">() { </span><span style="color: #6A737D;">// ... }</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">destroy</span><span style="color: #E1E4E8;">() { </span><span style="color: #6A737D;">// ... }</span></div><div class='line'><span style="color: #E1E4E8;">}</span></div></code></pre>
<p>Each method represents an endpoint or route, and with the exception of <code>view</code> and <code>index</code> they're paired up. These sort of controllers can grow quickly requiring a lot of abstraction, typically repositories, which can make navigating a codebase confusing.</p>
<p>Now, if we were to take this controller and create actions for it, we'd create the following:</p>
<ul>
<li>
<code>Articles\Index</code> - An invokable class with a single <code>__invoke</code> method that handles the article listing.</li>
<li>
<code>Articles\View</code> - An invokable class with a single <code>__invoke</code> method that handles viewing a particular article.</li>
<li>
<code>Articles\Create</code> - Essentially a smaller controller containing only the <code>create</code> and <code>store</code> methods.</li>
<li>
<code>Articles\Edit</code> - Similar to <code>Create</code> but with the <code>edit</code> and <code>update</code> methods.</li>
<li>
<code>Articles\Delete</code> - The same again but with <code>delete</code> and <code>destroy</code>.</li>
</ul>
<p>We’ve taken the controller and broken the methods up, abstracting them out into a class that represents their action. We have a few more classes here, but we can immediately identify the class responsible for a particular action, and because of the logical grouping, we know everything in <code>Articles\Create</code> is relevant to the creation of articles.</p>
<p>You’ll also notice that I defined two types of actions above, both of which are easy to register with Laravels router.</p>
<pre><code data-theme="github-dark" data-lang="php" class='torchlight' style='background-color: #24292e; --theme-selection-background: #39414a;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #E1E4E8;">$router</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">get</span><span style="color: #E1E4E8;">(</span><span style="color: #9ECBFF;">&#39;/articles&#39;</span><span style="color: #E1E4E8;">, </span><span style="color: #79B8FF;">Article\Index</span><span style="color: #F97583;">::class</span><span style="color: #E1E4E8;">);</span></div><div class='line'><span style="color: #E1E4E8;">$router</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">get</span><span style="color: #E1E4E8;">(</span><span style="color: #9ECBFF;">&#39;/create&#39;</span><span style="color: #E1E4E8;">, [</span><span style="color: #79B8FF;">Article\Create</span><span style="color: #F97583;">::class</span><span style="color: #E1E4E8;">, </span><span style="color: #9ECBFF;">&#39;create&#39;</span><span style="color: #E1E4E8;">]);</span></div><div class='line'><span style="color: #E1E4E8;">$router</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">post</span><span style="color: #E1E4E8;">(</span><span style="color: #9ECBFF;">&#39;/create&#39;</span><span style="color: #E1E4E8;">, [</span><span style="color: #79B8FF;">Article\Create</span><span style="color: #F97583;">::class</span><span style="color: #E1E4E8;">, </span><span style="color: #9ECBFF;">&#39;store&#39;</span><span style="color: #E1E4E8;">]);</span></div></code></pre>
<h2><a id="actions-vs-single-action-controllers" href="#actions-vs-single-action-controllers" class="hidden" aria-hidden="true" title="Permalink"></a>Actions vs Single Action Controllers</h2>
<p>Single action controllers, if you aren’t familiar, are simple classes with an <code>__invoke</code> method. Following on from the above example, the single action controller approach would require the creation of 8 separate classes.</p>
<ul>
<li>
<code>Articles\Index</code> - An invokable class with a single <code>__invoke</code> method that handles the article listing.</li>
<li>
<code>Articles\View</code> - An invokable class with a single <code>__invoke</code> method that handles viewing a particular article.</li>
<li>
<code>Articles\Create</code> - An invokable class with a single <code>__invoke</code> method that handles the displaying of the create article form.</li>
<li>
<code>Articles\Store</code> - An invokable class with a single <code>__invoke</code> method that handles the processing of the create article form.</li>
<li>
<code>Articles\Edit</code> - An invokable class with a single <code>__invoke</code> method that handles the displaying of the edit article form.</li>
<li>
<code>Articles\Update</code> - An invokable class with a single <code>__invoke</code> method that handles the processing of the edit article form.</li>
<li>
<code>Articles\Delete</code> - An invokable class with a single <code>__invoke</code> method that handles the displaying of the delete article confirmation page.</li>
<li>
<code>Articles\Destroy</code> - An invokable class with a single <code>__invoke</code> method that handles the confirmation of the article deletion.</li>
</ul>
<p>While that is only 3 more than we would create using my action definition, we’ve also made it harder to follow, as the classes responsible for creating an article are actually split across two classes. Chances are, we’re going to be jumping between the two when doing work, to make sure changes are present in both.</p>
<p>The benefit of my approach to actions here is the readability of the code and the logical grouping.</p>
<h2><a id="action-conclusion" href="#action-conclusion" class="hidden" aria-hidden="true" title="Permalink"></a>Action Conclusion</h2>
<p>The pros of using my proposed approach are:</p>
<ul>
<li>Makes the code more readable.</li>
<li>Helps prevent the creation of huge controllers.</li>
<li>Groups methods/routes logically.</li>
<li>Follows the single responsibility principal to a sensible level.</li>
</ul>
<p>And the cons of using my proposed approach are:</p>
<ul>
<li>Requires more classes than using a single resource controller.</li>
<li>Actions that can be performed ona resource are split across multiple classes.</li>
</ul>
<p>Since the number of classes isn’t an issue on modern systems or using modern editors, and it’s a general rule to avoid creating huge mammoth classes, I think it’s fair to say that the pros vastly outweigh the cons.</p>
<h2><a id="operations-vs-inline" href="#operations-vs-inline" class="hidden" aria-hidden="true" title="Permalink"></a>Operations vs Inline</h2>
<p>Whether you're using operations or not, performing things like querying the database inline is less than ideal, especially if it's a process that repeats itself with little to no changes.</p>
<p>As I mentioned previously, the <code>GetArticles</code> operation for this site is used on 4 public pages, plus the RSS feed, the sitemap and the admin area. If you had a codebase that had the same requirements, you'd find that you have a whole bunch of repeating code.</p>
<p>The base query for returning articles, on the primary listing page would look like this:</p>
<pre><code data-theme="github-dark" data-lang="php" class='torchlight' style='background-color: #24292e; --theme-selection-background: #39414a;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #79B8FF;">Article</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">query</span><span style="color: #E1E4E8;">()</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">where</span><span style="color: #E1E4E8;">(</span><span style="color: #9ECBFF;">&#39;post_at&#39;</span><span style="color: #E1E4E8;">, </span><span style="color: #9ECBFF;">&#39;&lt;=&#39;</span><span style="color: #E1E4E8;">, </span><span style="color: #79B8FF;">Carbon</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">now</span><span style="color: #E1E4E8;">())</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">where</span><span style="color: #E1E4E8;">(</span><span style="color: #9ECBFF;">&#39;active&#39;</span><span style="color: #E1E4E8;">, </span><span style="color: #9ECBFF;">&#39;=&#39;</span><span style="color: #E1E4E8;">, </span><span style="color: #79B8FF;">1</span><span style="color: #E1E4E8;">)</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">where</span><span style="color: #E1E4E8;">(</span><span style="color: #9ECBFF;">&#39;status&#39;</span><span style="color: #E1E4E8;">, </span><span style="color: #9ECBFF;">&#39;=&#39;</span><span style="color: #E1E4E8;">, </span><span style="color: #79B8FF;">Status</span><span style="color: #F97583;">::</span><span style="color: #79B8FF;">PUBLIC</span><span style="color: #E1E4E8;">)</span></div><div class='line'><span style="color: #E1E4E8;">    </span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">paginate</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">20</span><span style="color: #E1E4E8;">);</span></div></code></pre>
<p>If we wanted to retrieve only articles that belong to a particular category we’d need to copy the above and add the following <code>whereHas</code> clause.</p>
<pre><code data-theme="github-dark" data-lang="php" class='torchlight' style='background-color: #24292e; --theme-selection-background: #39414a;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #E1E4E8;">$query</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">whereHas</span><span style="color: #E1E4E8;">(</span><span style="color: #9ECBFF;">&#39;category&#39;</span><span style="color: #E1E4E8;">, </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> (</span><span style="color: #79B8FF;">Builder</span><span style="color: #E1E4E8;"> $query) </span><span style="color: #F97583;">use</span><span style="color: #E1E4E8;">($category) {</span></div><div class='line'><span style="color: #E1E4E8;">    $query</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">where</span><span style="color: #E1E4E8;">(</span><span style="color: #9ECBFF;">&#39;id&#39;</span><span style="color: #E1E4E8;">, </span><span style="color: #9ECBFF;">&#39;=&#39;</span><span style="color: #E1E4E8;">, $category</span><span style="color: #F97583;">-&gt;</span><span style="color: #E1E4E8;">id);</span></div><div class='line'><span style="color: #E1E4E8;">})</span></div></code></pre>
<p>We’d repeat the same process for topics and versions, with the relationship names changed appropriately.</p>
<p>Creating an operation here would abstract that query out to a single place, allowing you to change the query everywhere at once.</p>
<pre><code data-theme="github-dark" data-lang="php" class='torchlight' style='background-color: #24292e; --theme-selection-background: #39414a;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #E1E4E8;">$articles </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> (</span><span style="color: #F97583;">new</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">GetArticle</span><span style="color: #E1E4E8;">)</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">perform</span><span style="color: #E1E4E8;">();</span></div></code></pre>
<p>Then when I want to query for category, version or topic articles, I can just add <code>setCategory($category)</code>, <code>setTopic($topic)</code> or <code>setVersion($version)</code> before the <code>perform()</code> method.</p>
<p>If we were to need something that requires configuring we’d add another setter. That would require us to modify the code calling the operation, but if you’re using a modern IDE, finding usages of a particular class is a trivial process.</p>
<p>My operations are typically quite descriptive, and simply act as a layer of abstraction as well as simplification. Due to this, I do actually provide all of the values using setters. You may think that this isn’t at all that different to doing it inline, but each of my setters that adds a single value, could possibly expand out into some more complex code.</p>
<p>Here’s my usage of the operation:</p>
<pre><code data-theme="github-dark" data-lang="php" class='torchlight' style='background-color: #24292e; --theme-selection-background: #39414a;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #E1E4E8;">$articles </span><span style="color: #F97583;">=</span><span style="color: #E1E4E8;"> (</span><span style="color: #F97583;">new</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">GetArticles</span><span style="color: #E1E4E8;">)</span></div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">setActiveOnly</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">true</span><span style="color: #E1E4E8;">)</span></div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">setStatuses</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">Status</span><span style="color: #F97583;">::</span><span style="color: #79B8FF;">PUBLIC</span><span style="color: #E1E4E8;">)</span></div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">setPaginate</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">true</span><span style="color: #E1E4E8;">)</span></div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">setLimit</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">20</span><span style="color: #E1E4E8;">)</span></div><div class='line'><span style="color: #E1E4E8;">            </span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">perform</span><span style="color: #E1E4E8;">();</span></div></code></pre>
<h2><a id="operations-vs-repositories" href="#operations-vs-repositories" class="hidden" aria-hidden="true" title="Permalink"></a>Operations vs Repositories</h2>
<p>Repositories are a totally valid method of abstraction and can be used with Eloquent, regardless of what others may say, and for the longest time I championed this pattern.</p>
<p>Over time I found myself having to create many different methods for all the uses cases, while trying to avoid requiring 10s of arguments being passed, which required me to abstract out to yet more methods to avoid repeat code.</p>
<p>My first step away from repositories was to introduce the concept of Criteria, which were essentially eloquent scopes but not tied to specific models. Think along the lines of the following:</p>
<pre><code data-theme="github-dark" data-lang="php" class='torchlight' style='background-color: #24292e; --theme-selection-background: #39414a;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #E1E4E8;">$repository</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">with</span><span style="color: #E1E4E8;">(</span><span style="color: #F97583;">new</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">ActiveOnly</span><span style="color: #E1E4E8;">, </span><span style="color: #F97583;">new</span><span style="color: #E1E4E8;"> </span><span style="color: #79B8FF;">Published</span><span style="color: #E1E4E8;">)</span><span style="color: #F97583;">-&gt;</span><span style="color: #B392F0;">getArticles</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">20</span><span style="color: #E1E4E8;">);</span></div></code></pre>
<p>This was all well and good but I soon hit a point where I needed criteria that was aware of other criteria, which is actually the point where I came up with operations, by taking my criteria and making my criteria the operation.</p>
<p>This site actually allows me and other admins to view inactive and non-public articles, adding two possible conditions to the querying of articles. Ignoring the concept of criteria for a minute, let’s take a look at what my particular use-cases could look like when using repositories.</p>
<pre><code data-theme="github-dark" data-lang="php" class='torchlight' style='background-color: #24292e; --theme-selection-background: #39414a;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">getArticles</span><span style="color: #E1E4E8;">(</span><span style="color: #F97583;">int</span><span style="color: #E1E4E8;"> $limit, </span><span style="color: #F97583;">bool</span><span style="color: #E1E4E8;"> $active, </span><span style="color: #F97583;">int</span><span style="color: #E1E4E8;"> $status);</span></div><div class='line'><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">getCategoryArticles</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">Category</span><span style="color: #E1E4E8;"> $category, </span><span style="color: #F97583;">int</span><span style="color: #E1E4E8;"> $limit, </span><span style="color: #F97583;">bool</span><span style="color: #E1E4E8;"> $active, </span><span style="color: #F97583;">int</span><span style="color: #E1E4E8;"> $status);</span></div><div class='line'><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">getTopicArticles</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">Topic</span><span style="color: #E1E4E8;"> $topic, $limit, </span><span style="color: #F97583;">bool</span><span style="color: #E1E4E8;"> $active, </span><span style="color: #F97583;">int</span><span style="color: #E1E4E8;"> $status);</span></div><div class='line'><span style="color: #F97583;">public</span><span style="color: #E1E4E8;"> </span><span style="color: #F97583;">function</span><span style="color: #E1E4E8;"> </span><span style="color: #B392F0;">getVersionArticles</span><span style="color: #E1E4E8;">(</span><span style="color: #79B8FF;">Version</span><span style="color: #E1E4E8;"> $version, $limit, </span><span style="color: #F97583;">bool</span><span style="color: #E1E4E8;"> $active, </span><span style="color: #F97583;">int</span><span style="color: #E1E4E8;"> $status);</span></div></code></pre>
<p>There are obviously many ways that you could write these methods, as in my first example I created 8, the 4 you see above plus 4 prefixed with <code>getPublished</code>.</p>
<p>However you decide go about this, you will typically find yourself with one of the following:</p>
<ul>
<li>A huge method that handles all cases, with many arguments, and is pretty much the only public method on the repository.</li>
<li>Several smaller methods that have basically the same code with very slight differences.</li>
<li>Many smaller methods that mostly abstract out the logic to avoid repeat code (The Taylor approach I call this), but doing nothing but filling the class with arguably unnecessary methods.</li>
</ul>
<p>Now let’s take a look at my <a rel="noopener noreferrer" target="_blank" class="link link--external" href="https://github.com/ollieread/ollieread.com/blob/master/app/Articles/Operations/GetArticles.php"><code>GetArticles</code></a> operation. It's 290 lines long, with only 86 of those handling the actual logic. The rest are docblocks, setters or blank-lines. This class has 9 used properties with their own setters.</p>
<ul>
<li>
<code>activeOnly</code> - A flag denoting whether or not to only query for active articles.</li>
<li>
<code>statuses</code> - An int array containing the statuses to query for.</li>
<li>
<code>limit</code> - The amount of articles to return.</li>
<li>
<code>category</code> - The category that the articles should belong to.</li>
<li>
<code>topics</code> - A collection of topic models that the articles should have assigned.</li>
<li>
<code>versions</code> - A collection of version models that the articles should have assigned.</li>
<li>
<code>series</code> - The series that the articles should belong to (not actually used right now).</li>
<li>
<code>paginate</code> - Whether or not to paginate the results, if true the limit is used, otherwise it's a non paginated limited response.</li>
<li>
<code>liveOnly</code> - A flag denoting whether the articles should have a <code>post_at</code> of less than now.</li>
</ul>
<p>This operation allows me to get the same results as the 4 example repository methods I defined above, as well as many other combinations as are possible.</p>
<p>It should also be noted that this operation is arguably my most complex, with <code>GetTopics</code> being 134 lines comprising of a 29 line long method (including definition and braces), 6 properties and 6 setters. You can see that operation <a href="(https://github.com/ollieread/ollieread.com/blob/master/app/Articles/Operations/GetTopics.php)">here</a></p>
<h2><a id="operations-vs-services" href="#operations-vs-services" class="hidden" aria-hidden="true" title="Permalink"></a>Operations vs Services</h2>
<p>Services are in essence similar to repositories, and would fall foul of the same problems mentioned above.</p>
<p>You could however, create a stateful service that has a builder like interface, allowing you to build up your requirements before retrieving the result. In that instance, you’ve basically created an operation. I think the distinction here is primarily that my operations follow a standard pattern, if not an interface, and only perform a single operation, albeit in multiple different ways.</p>
<p>There’s not much more to add here, as operations are arguably very specific services.</p>
<h2><a id="operations-vs-model-methods" href="#operations-vs-model-methods" class="hidden" aria-hidden="true" title="Permalink"></a>Operations vs Model Methods</h2>
<p>The biggest problem with adding model methods is that Eloquent models already have an insane amount of methods inherited from the parent model and its boatload of traits. Adding more is really going to complicate things, especially if you want decent tab completion in your IDE.</p>
<p>Model methods would also find itself caught by the same pitfalls as repositories and services. By the time you’d created methods that allowed for all the combinations that my operation allows you’d have as many methods and calls as would be required by just doing it <a href="#operations-vs-inline">inline</a>.</p>
<h2><a id="operations-conclusion" href="#operations-conclusion" class="hidden" aria-hidden="true" title="Permalink"></a>Operations Conclusion</h2>
<p>The pros of using my proposed approach are:</p>
<ul>
<li>Provides a level of abstraction for your application and/or business logic.</li>
<li>Typically requires less code.</li>
<li>More flexible than creating methods for each use case, when in a model, service or repository.</li>
<li>Reusable.</li>
<li>Isn’t limited specifically to database interactions.</li>
<li>Fluent builder interface is easier to follow and use compared to method arguments.</li>
<li>Follows the single responsibility principal.</li>
</ul>
<p>The cons of using proposed approach are:</p>
<ul>
<li>Adding extra options in still requires you finding all references and updating accordingly.</li>
<li>The classes appear far larger than they are in truth.</li>
</ul>
<p>Operations are clearly easier to follow and easier to work with, outweighing the cons.</p>
<h1><a id="command-query-separation" href="#command-query-separation" class="hidden" aria-hidden="true" title="Permalink"></a>Command Query Separation</h1>
<p>Command Query Separation, or <a rel="noopener noreferrer" target="_blank" class="link link--external" href="https://en.wikipedia.org/wiki/Command%E2%80%93query_separation">CQS</a> is a design pattern not entirely dissimilar to that of my operations approach. The biggest difference is that it splits up what I would consider operations into commands and queries, and the specific rules about these are something I didn’t get along with.</p>
<h2><a id="commands" href="#commands" class="hidden" aria-hidden="true" title="Permalink"></a>Commands</h2>
<p>Commands in CQS are write operations, that return no result. They are permitted to throw exceptions, and since using exceptions to control the flow of the system is typically frowned upon, that was of little use.</p>
<p>If this is the first time you’re hearing of CQS, you’re probably asking “Why on earth would I not want a result?”, which is a question I’m still asking myself. I believe that the general practise here would be to use a query after a command, to query the result.</p>
<p>By all means take a read of the CQS pattern and see if you can see something that I missed. I’d be more than happy to hear a sensible argument for this approach.</p>
<h2><a id="queries" href="#queries" class="hidden" aria-hidden="true" title="Permalink"></a>Queries</h2>
<p>Queries in CQS are the opposite of commands, performing only read operations and returning the result. Queries can be used by commands, but cannot use commands. I can definitely think of many times where this would be fine and I could live with the few where it wouldn’t.</p>
<h2><a id="so-why-not-cqs" href="#so-why-not-cqs" class="hidden" aria-hidden="true" title="Permalink"></a>So why not CQS?</h2>
<p>My conclusion with CQS was that it would require the creation of far more classes than my operations approach, definitely more than the obvious 2x, and afford less flexibility without thinning the lines between what is acceptable and what is not.</p>
<p>My operation solution combines the two into one, and can in theory return no result like a command, but it’s probably best to always return something.</p>
<p>Perhaps it’s my understanding of CQS, or lack thereof, but I really don’t see the benefit at all. If you’re a champion of this pattern, or someone with an eye on something that I can’t see, I’d love to hear from you.</p>
<h1><a id="conclusion" href="#conclusion" class="hidden" aria-hidden="true" title="Permalink"></a>Conclusion</h1>
<p>I tried to approach this topic objectively for this article, and I’ll be the first to admit that I am most probably biased, but I genuinely believe in this approach, not just from the theory, but the practicality of it too.</p>
<p>The purpose of this article was to share with you this approach, and try to explain how I came up with this, as well as offer all of the information to you so that you can make your own decision, and/or give me feedback.</p>
<p>If you’ve got questions about this, criticism on the approach, or even if you want to inform me that this pattern already exists and is definitely not something I coined, I’d love to hear from you. You can contact me on <a rel="noopener noreferrer" target="_blank" class="link link--external" href="https://twitter.com/ollieread">twitter</a>, <a rel="noopener noreferrer" target="_blank" class="link link--external" href="https://discordapp.com/invite/k7yUccq">discord</a> or in the comments below.</p>
<p>I hope you enjoyed this article.</p>
    </main>
</div>
</main>

    <!-- Fathom - beautiful, simple website analytics -->
    <script src="https://cdn.usefathom.com/script.js" data-site="THPWLTOW" defer></script>
    <!-- / Fathom -->

<script src="/assets/build/js/main.js?id=332d80b6520e8206b9564927e5f9bd73"></script>


</body>
</html>
